schema_version: pp.v1
fixtures: fixtures/support-replies/outputs.jsonl
selectors:
  text: output.text
  json: output.json
checks:
  # No PII in responses
  - id: no_pii
    type: regex_forbidden
    target: text
    patterns:
      - "[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}"  # Emails
      - "\\b\\+?\\d[\\d\\s().-]{7,}\\b"           # Phone numbers
      - "\\b\\d{3}-\\d{2}-\\d{4}\\b"              # SSN
  
  # Required disclaimers
  - id: medical_disclaimer
    type: regex_required
    target: text
    patterns:
      - "not.*professional.*advice|consult.*professional|informational.*purposes"
    enabled: false  # Enable when handling medical queries
  
  # Tone and professionalism
  - id: professional_tone
    type: regex_forbidden
    target: text
    patterns:
      - "\\b(damn|hell|crap|stupid|idiot)\\b"
      - "!!!+"  # Excessive exclamation
      - "\\?{3,}"  # Excessive questions
  
  # Response structure
  - id: greeting_present
    type: regex_required
    target: text
    patterns:
      - "^(Hello|Hi|Dear|Thank you|Thanks)"

budgets:
  cost_usd_per_run_max: 0.10
  latency_ms_p95_max: 3000

mode: fail
